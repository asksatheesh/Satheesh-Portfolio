const sleep = ms => new Promise(res => setTimeout(res, ms));

var typed = new Typed('#typed', {
    strings: ["Software Engineering...", "Machine Learning..."],
    typeSpeed : 100,
    backSpeed:30,
    backDelay: 1200,
    loop: true,
});


document.querySelectorAll('#section-nav .nav-link').forEach(link => {
  link.addEventListener('click', function() {
    document.querySelectorAll('#section-nav .nav-link').forEach(nav => nav.classList.remove('active'));
    this.classList.add('active');
  });
});


document.addEventListener("scroll", function () {
  const sections = document.querySelectorAll("section[id]");
  const scrollPos = window.scrollY + window.innerHeight / 4; // trigger earlier
  
  let activeFound = false;

  sections.forEach((section, index) => {
    const top = section.offsetTop;
    const bottom = top + section.offsetHeight;
    const link = document.querySelector(`#section-nav .nav-link[href="#${section.id}"]`);

    if (scrollPos >= top && scrollPos < bottom) {
      link?.classList.add("active");
      activeFound = true;
    } else {
      link?.classList.remove("active");
    }
  });

  // Force last section (contact) active when scrolled to bottom
  if (!activeFound && window.innerHeight + window.scrollY >= document.body.offsetHeight - 5) {
    document.querySelector(`#section-nav .nav-link[href="#contact"]`)?.classList.add("active");
  }
});



